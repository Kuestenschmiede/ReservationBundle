function getWeekdate(e){var t,i,r;return 0<e.indexOf(".")?e=(t=e.split("."))[2]+"/"+(i=(i=t[1])<10?"0"+i:i)+"/"+(r=(r=t[0])<10?"0"+r:r):0<e.indexOf("/")&&(e=(t=e.split("/"))[2]+"/"+(i=(i=t[1])<10?"0"+i:i)+"/"+(r=(r=t[0])<10?"0"+r:r)),new Date(e).getDay()}function isSunday(e,t){return 0===getWeekdate(e)}function isMonday(e,t){return 1===getWeekdate(e)}function isTuesday(e,t){return 2===getWeekdate(e)}function isWednesday(e,t){return 3===getWeekdate(e)}function isThursday(e,t){return 4===getWeekdate(e)}function isFriday(e,t){return 5===getWeekdate(e)}function isSaturday(e,t){return 6===getWeekdate(e)}function setObjectId(e,t,i=0){var r,n=(n=e.className).split(" ")[0],a=t,l=document.getElementById("c4g_reservation_object_"+a),d=jQuery(document.getElementsByClassName("displayReservationObjects")),t=-1;return l&&(jQuery(l).show(),d&&d.show(),n&&(r=(t=n.split("_")[2]).split("-"),jQuery(e).is(":disabled")||jQuery(l).val(r[0]).change())),hideOptions(d,a,r||t,i),!0}function hideOptions(e,t,r,n){if(e){-1==t&&(t=(y=document.getElementById("c4g_reservation_type"))?y.value:-1);var a=document.getElementById("c4g_reservation_object_"+t),l=-1;if(a){for(i=0;i<a.options.length;i++){var d=a.options[i],s=d.getAttribute("min")?parseInt(d.getAttribute("min")):1,u=d.getAttribute("max")?parseInt(d.getAttribute("max")):1,o=document.getElementById("c4g_desiredCapacity_"+t),o=o?o.value:1,c=!1;if(jQuery.isArray(r))for(j=0;j<r.length;j++)r[j]==d.value&&(c=!0);c||-1==d.value?-1!=d.value&&(jQuery(a).children('option[value="'+d.value+'"]').removeAttr("disabled"),s&&u&&o&&0<o&&(o<s||u<o)?jQuery(a).children('option[value="'+d.value+'"]').attr("disabled","disabled"):(jQuery(a).children('option[value="'+d.value+'"]').removeAttr("disabled"),-1==l&&-1!=d.value&&(l=d.value))):jQuery(a).children('option[value="'+d.value+'"]').attr("disabled","disabled")}if(0<=parseInt(l)){if(jQuery(a).val(l).change(),jQuery(a).children('option[value="'+l+'"]').removeAttr("disabled"),jQuery(a).children('option[value="-1"]').attr("disabled","disabled"),jQuery(a).removeAttr("disabled"),n){var y=jQuery(a).children('option[value="'+l+'"]').text(),v="",m="",g=document.getElementsByClassName("c4g_date_field_input");if(g)for(i=0;i<g.length;i++){var h=g[i];if(h&&h.value&&jQuery(h).is(":visible")){v=h.value;break}}var _=jQuery(".reservation_time_button_"+t+' input[type = "radio"]:checked');if(_)for(i=0;i<_.length;i++){var f=_[i];f&&(m=(f=jQuery('label[for="'+jQuery(f).attr("id")+'"]'))?f[0].firstChild.nodeValue:"")}y&&""!=v&&""!=m&&(-1!=(n=y.lastIndexOf(" ("))&&(y=y.substr(0,n)),jQuery(a).children('option[value="'+l+'"]').text(y+" ("+v+" "+m+")"))}}else jQuery(a).children('option[value="-1"]').removeAttr("disabled"),jQuery(a).val("-1").change(),jQuery(a).prop("disabled",!0)}}checkEventFields(-1)}function setReservationForm(e,t,r,n){jQuery(document.getElementsByClassName("reservation-id")).hide(),-1==t&&(t=(u=document.getElementById("c4g_reservation_type"))?u.value:-1);var a=!1,l=document.getElementsByClassName("c4g_date_field_input");if(l)for(i=0;i<l.length;i++){var d=l[i];if(d&&d.value&&jQuery(d).is(":visible")){a=!0,setTimeset(d,e,t,r,n);break}}if(!a){var s="c4g_beginDate_"+t;if(document.getElementById(s))setTimeset(document.getElementById(s),e,t,r,n);else{var u=window.location.search;const o=new URLSearchParams(u);u=o.get("event"),s="c4g_beginDateEvent_"+t+"-22"+u;u&&document.getElementById(s)&&setTimeset(document.getElementById(s),e,t,r,n)}}}function checkTimelist(n,a){var l=-1;if(n&&a)for(idx=0;idx<a.length;idx++)if(a[idx]){let e=[],t=a[idx].toString();t&&t.indexOf("#")?e=t.split("#"):e[0]=t;let i=[];(n=n.toString()).indexOf("#")?i=n.split("#"):i[0]=n;let r=0;if(parseInt(e[0])===parseInt(i[0])&&(l=idx,r++),e[1]&&i[1]){var d=parseInt(e[0]),s=d+parseInt(e[1]),u=parseInt(i[0]),o=u+parseInt(i[1]);if(d<=u&&u<s&&(l=idx,r++),d<o&&o<=s&&(l=idx,r++),3==r)break}}else if(1==hits)break;return l}function checkMax(n,a,l,d,s,e){let u=!0;var o,c,j,v;if(n[a][l].act+parseInt(e)<=n[a][l].max){for(y=0;y<n.length;y++)if(d&&s&&y!=a){let e=[],t=s[y].toString();t&&t.indexOf("#")?e=t.split("#"):e[0]=t;let i=[];(d=d.toString()).indexOf("#")?i=d.split("#"):i[0]=d;let r=!1;if(parseInt(e[0])===parseInt(i[0])?r=!0:e[1]&&i[1]&&(c=(o=parseInt(e[0]))+parseInt(e[1]),v=(j=parseInt(i[0]))+parseInt(i[1]),(o<=j&&j<c||o<v&&v<=c)&&(r=!0)),r)for(z=0;z<n[y].length;z++)if(n[y][z].act>=n[y][z].max||n[y][z].act+n[a][l].act>=n[a][l].max)return!1;u=!0}}else u=!1;return u}function setTimeset(e,t,T,r,W){var n=apiBaseUrl+"/c4g_brick_ajax",S=0,z=-1;-1==T?(jQuery(document.getElementsByClassName("reservation_time_button"))&&jQuery(document.getElementsByClassName("reservation_time_button")).hide(),jQuery(document.getElementsByClassName("displayReservationObjects"))&&jQuery(document.getElementsByClassName("displayReservationObjects")).hide()):(e=e||document.getElementById("c4g_beginDate_"+T),S=e?e.value:0);var a,e=document.getElementById("c4g_duration");e&&(a=e.value),C4GCallOnChangeMethodswitchFunction(document.getElementById("c4g_reservation_object_"+T)),C4GCallOnChange(document.getElementById("c4g_reservation_object_"+T)),S&&S.indexOf("/")&&(S=(S=S.replace("/","~")).replace("/","~")),t&&r&&S&&T&&jQuery.ajax({dataType:"json",url:n+"/"+t+"/buttonclick:"+r+":"+S+":"+T+":"+a+"?id=0",success:function(e){var t=document.getElementById("c4g_beginTime_"+T+"-00"+getWeekdate(S)),r=(t?t.parentElement:document).getElementsByClassName("c4g_brick_radio_group"),n=[],a=[],d=[],s=e.times;s.length;document.getElementById("c4g_reservation_id").value=e.reservationId,jQuery(document.getElementsByClassName("reservation-id")).show(),jQuery(document.getElementsByClassName("reservation_time_button_"+T))&&jQuery(document.getElementsByClassName("reservation_time_button_"+T)).show();var u,o=0;for(u in s){var c=s[u].time;0<parseInt(s[u].interval)&&(c=s[u].time+"#"+s[u].interval);var y=s[u].interval,v=s[u].objects;n[o]=c,a[o]=y,d[o]=v,o++}var m=document.getElementById("c4g_reservation_object_"+T),g=1,h=1;if(m)for(i=0;i<m.options.length;i++){var _=m.options[i],f=_.getAttribute("min")?parseInt(_.getAttribute("min")):1;(-1==f||f<g)&&(g=f);_=_.getAttribute("max")?parseInt(_.getAttribute("max")):1;(-1==_||h<_)&&(h=_)}var e=document.getElementById("c4g_desiredCapacity_"+T),p=e?e.value:1;if(r)for(i=0;i<r.length;i++)for(j=0;j<r[i].children.length;j++)if(!r[i].children[j].style||"display:none"!=r[i].children[j].style)for(k=0;k<r[i].children[j].children.length;k++){var b=jQuery(r[i].children[j].children[k]).val();if(b){namefield=r[i].children[j].children[k].getAttribute("name").substr(1);var Q=checkTimelist(b,n),I=-1,E=0;if(-1!==Q)for(l=0;l<d[Q].length;l++)-1!=d[Q][l].id&&checkMax(d,Q,l,b,n,p)&&(I=I<d[Q][l].act?d[Q][l].act:I,E=d[Q][l].percent);if(0<=I&&I<h&&g<=p&&p<=h){let e="";for(l=0;l<d[Q].length;l++){var B=d[Q][l];a[Q],n[Q];0==l?e+=B.id:e=e+"-"+B.id;for(var C=0;C<jQuery(m).length;C++)if(m[C].value==B.id){0;break}}"undefined"!=e&&(jQuery(r[i].children[j].children[k]).removeClass().addClass("radio_object_"+e),jQuery(r[i].children[j].children[k]).attr("disabled",!1)),0<E&&jQuery(r[i].children[j].children[k]).addClass("radio_object_hurry_up"),z=d[Q][0].id}else jQuery(r[i].children[j].children[k]).removeClass().addClass("radio_object_disabled"),jQuery(r[i].children[j].children[k]).attr("disabled",!0)}}if(hideOptions(document.getElementsByClassName("displayReservationObjects"),T,z,W),-1!=T){var x=jQuery(".reservation_time_button_"+T+'.formdata input[type = "hidden"]'),w=!1;if(x)for(i=0;i<x.length;i++)if("none"!=x[i].style.display){w=x[i].value;break}var O=!1,A=jQuery(".reservation_time_button_"+T+' input[type = "radio"]');if(w){if(A)for(i=0;i<A.length;i++){var N=A[i];if(N&&jQuery(N).is(":visible")&&N.value===w){O=N;break}}}else A&&1===A.length&&(O=A[0]);!O||jQuery(O).is(":disabled")||jQuery(O).hasClass("radio_object_disabled")||(A.prop("checked",!0),e=O.getAttribute("name").substr(1),(e=document.getElementById(e))&&(e.value=O.value),setObjectId(O,T,W))}}})}function checkEventFields(e){var t=document.getElementById("c4g_reservation_type"),r=t?t.value:-1,n=jQuery(".reservation-event-object select");if(jQuery(".eventdata").hide(),n&&n.is(":visible")){for(jQuery(document.getElementsByClassName("reservation-id")).show(),i=0;i<n.length;i++)if(n[i]){var a,l,d=-1;if(n[i].value&&(d=r.toString()+"-22"+n[i].value.toString(),jQuery(".eventdata_"+d).show(),jQuery(".eventdata_"+d).children().show()),a=document.getElementsByClassName("begindate-event"))for(j=0;j<a.length;j++)-1!=d&&jQuery(a[j]).children().children("input").hasClass("c4g_beginDateEvent_"+d)?(jQuery(a[j]).show(),jQuery(a[j]).children("label").show(),jQuery(a[j]).children(".c4g_date_field_container").show(),jQuery(a[j]).children(".c4g_date_field_container").children("input").show()):(jQuery(a[j]).hide(),jQuery(a[j]).children("label").hide(),jQuery(a[j]).children(".c4g_date_field_container").hide(),jQuery(a[j]).children(".c4g_date_field_container").children("input").hide());if(l=jQuery(".c4g_brick_radio_group_wrapper .reservation_time_event_button"))for(j=0;j<l.length;j++)-1!=d&&jQuery(l[j]).hasClass("reservation_time_event_button_"+d)?(jQuery(l[j]).show(),jQuery(l[j]).children("label").show(),jQuery(l[j]).parent().show(),jQuery(l[j]).parent().parent().show(),jQuery(l[j]).parent().parent().parent().show()):(jQuery(l[j]).hide(),jQuery(l[j]).children("label").hide(),jQuery(l[j]).parent().hide(),jQuery(l[j]).parent().parent().hide(),jQuery(l[j]).parent().parent().parent().hide())}}else{if(a=jQuery(".begindate-event"))for(i=0;i<a.length;i++)jQuery(a[i]).hide();if(l=jQuery(".reservation_time_event_button"))for(i=0;i<l.length;i++)jQuery(l[i]).hide()}}