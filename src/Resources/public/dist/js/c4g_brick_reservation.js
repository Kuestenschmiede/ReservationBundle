function setObjectId(t,e,n=0){var a=!!t&&t.getAttribute("data-object"),r=e,l=document.getElementById("c4g_reservation_object_"+r),d=document.getElementsByClassName("displayReservationObjects"),e="",s=!1;if(l){if(l.style.display="block",s=l.value&&0<parseInt(l.value)?l.value:s,d)for(i=0;i<d.length;i++)d[i].style.display="block";if(a){var o=a.split("-"),c=!1;for(i=0;i<o.length;i++){for(j=0;j<l.options.length;j++)if(!l.options[j].getAttribute("hidden")&&l.options[j].value==o[i]){l.value=o[i],handleBrickConditions(),c=!0;break}if(c)break}e=o||e}}if(hideOptions(r,e,n),t){n=t.getAttribute("data-desc");if(n){let e=t.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector(".c4g__form-description");e&&(e.innerHTML=n)}}if(s)for(i=0;i<l.options.length;i++)if(!l.options[i].getAttribute("hidden")&&!l.options[i].getAttribute("disabled")&&l.options[i].value==s){l.value=s,handleBrickConditions();break}if(l&&-1!==parseInt(l.value))for(i=0;i<l.options.length;i++)if(-1==parseInt(l.options[i].value)&&"none"!=l.options[i].style.display){l.options[i].style.display="none";break}return!0}function hideOptions(e,t,n){var a;-1==e&&(e=(a=document.getElementById("c4g_reservation_type"))?a.value:-1);var r=document.getElementById("c4g_reservation_object_"+e),l=!1,d=0,s=!1;if(r){for(i=0;i<r.options.length;i++){var o=r.options[i],c=o.getAttribute("min")?parseInt(o.getAttribute("min")):1,u=o.getAttribute("max")?parseInt(o.getAttribute("max")):0,m=document.getElementById("c4g_desiredCapacity_"+e),g=m?m.value:0;o.value&&-1==parseInt(o.value)&&(s=i);var v=!1;if(Array.isArray(t)){if(c&&g&&0<g&&c<=g&&g<=u)for(j=0;j<t.length;j++)t[j]==o.value&&(d=t[j],v=!0);else for(j=0;j<t.length;j++)if(t[j]==o.value){0==j&&(d=t[j]),v=!0;break}}else 0<=parseInt(t)&&t==o.value&&(d=t,v=!0);if(v||-1==o.value?-1!=o.value&&(o.removeAttribute("disabled"),o.removeAttribute("hidden"),c&&g&&0<g?g<c||u&&u<g?(o.setAttribute("disabled","disabled"),o.setAttribute("hidden","hidden")):(o.removeAttribute("disabled"),o.removeAttribute("hidden"),(0<=d&&o.value==d||-1==l&&-1!=o.value)&&(l=i)):(o.removeAttribute("disabled"),o.removeAttribute("hidden"),(0<=d&&o.value==d||-1==r.value&&-1!=o.value)&&(l=i))):(o.setAttribute("disabled","disabled"),o.setAttribute("hidden","hidden")),n&&-1!=o.value&&v){var b=o.textContent,p="",f="",_=document.querySelectorAll(".reservation_time_button_"+e+' input[type = "radio"]:checked');if(_&&_[0]){for(var y=_[0].getAttribute("data-stamp")?parseInt(_[0].getAttribute("data-stamp")):0,h=document.getElementsByClassName("c4g__form-check-label"),A=0;A<h.length;A++)if(h[A].htmlFor==_[0].id){f=h[A].textContent;break}var I=document.querySelectorAll(".c4g__form-date-container .c4g_beginDate_"+e);if(I)for(A=0;A<I.length;A++){var E=I[A];if(E&&E.value){var N,B,k=E.getAttribute("data-org");null!==k&&(E.value=k),82800<=y?((N=new Date(E.value.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1"))).setSeconds(N.getSeconds()+86400),B=new Intl.DateTimeFormat("en",{year:"numeric"}).format(N),k=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(N),p=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(N)+"."+k+"."+B,E.setAttribute("data-org",E.value),E.value=p):p=E.value;break}}b&&""!=p&&""!=f&&(m=b.lastIndexOf(")"),c="",-1!=(u=b.lastIndexOf(" ("))&&-1!=m&&u<m&&(c=-1!==(g=b.indexOf(";"))?b.substr(u+2,g-u-2):b.substr(u+2,m-u-2)),-1!=u&&(b=b.substr(0,u)),-1!=f.indexOf(p)?c&&-1!==c.search(/€/)?o.textContent=b+" ("+c+"; "+f+")":o.textContent=b+" ("+f+")":c&&-1!==c.search(/€/)?o.textContent=b+" ("+c+"; "+p+" "+f+")":o.textContent=b+" ("+p+" "+f+")")}}}-1!==parseInt(l)&&r.options[l]?(r.value=r.options[l].value,r.options[l].removeAttribute("disabled"),r.options[l].removeAttribute("hidden"),0!=s&&(r.options[s].setAttribute("disabled","disabled"),r.options[s].setAttribute("hidden","hidden")),r.removeAttribute("disabled")):(0!=s&&(r.options[s].removeAttribute("disabled"),r.options[s].removeAttribute("hidden")),r.value=-1,r.setAttribute("disabled","disabled")),eventFire(r,"change")}checkEventFields()}function checkType(e,t){return t?!!e.parent.parent.classList.contains("begindate-event"):!!e.parent.parent.classList.contains("begin-date")}function setReservationForm(e,t){var n=!(document.getElementsByClassName("reservation-id")[0].style.display="none"),a=!1,r=document.getElementById("c4g_reservation_type");e=r?r.value:-1;var l=r.selectedIndex,l=r.options[l];if(l&&(n=2==l.getAttribute("type"),a=3==l.getAttribute("type")),0<e){l=document.getElementById("c4g_desiredCapacity_"+e);l&&(d=l.value,l.getAttribute("max")&&d>parseInt(l.getAttribute("max"))&&(l.value=l.getAttribute("max")),l.getAttribute("min")&&d<parseInt(l.getAttribute("min"))&&(l.value=l.getAttribute("min")));var d,l=document.getElementById("c4g_duration_"+e);l&&"none"!==l.style.display&&(l.style.display="block",d=l.value,l&&l.getAttribute("max")&&d>parseInt(l.getAttribute("max"))&&(l.value=l.getAttribute("max")),l&&l.getAttribute("min")&&d<parseInt(l.getAttribute("min"))&&(l.value=l.getAttribute("min")));l="c4g_beginDate_"+e;if(a){var s=document.getElementById("c4g_reservation_object_"+e);s&&(l=l+"-33"+s.value,setTimeset(document.getElementById(l).value,e,t,s.value))}else if(n){s=window.location.search;const m=new URLSearchParams(s);s=m.get("event");if(s){l="c4g_beginDateEvent_"+e+"-22"+s;document.getElementById(l)&&(setTimeset(document.getElementById(l).value,e,t,0),checkEventFields())}else{var o=document.getElementsByClassName("c4g__form-date-input");if(o)for(i=0;i<o.length;i++){var c=o[i];if(c&&checkType(c,n)&&c.value){var u=c.id;if(u&&u.indexOf("c4g_beginDateEvent_"+e+"-22")){setTimeset(c.value,e,t,0),checkEventFields();break}}}}}else document.getElementById(l)&&setTimeset(document.getElementById(l).value,e,t,0)}handleBrickConditions(),document.getElementsByClassName("c4g__spinner-wrapper")[0].style.display="none"}function checkTimelist(a,r){var l=-1;if(a&&r)for(idx=0;idx<r.length;idx++){let n=0;if(r[idx]){let e=[],t=r[idx].toString();t&&t.indexOf("#")?e=t.split("#"):e[0]=t;let i=[];if((a=a.toString()).indexOf("#")?i=a.split("#"):i[0]=a,parseInt(e[0])===parseInt(i[0])&&(l=idx,n++),e[1]&&i[1]){var d=parseInt(e[0]),s=d+parseInt(e[1]),o=parseInt(i[0]),c=o+parseInt(i[1]);if(d<=o&&o<s&&(l=idx,n++),d<c&&c<=s&&(l=idx,n++),3==n)break}else if(e[1]&&i[0]){var u=parseInt(e[0]),m=u+parseInt(e[1]),g=parseInt(i[0]);if(u<=g&&g<=m&&(l=idx,n++),3==n)break}else if(e[0]&&i[1]){u=parseInt(e[0]),g=parseInt(i[0]),m=g+parseInt(i[1]);if(g<=u&&u<=m&&(l=idx,n++),3==n)break}}else if(1==n)break}return l}function checkMax(a,r,l,d,s,e){let o=!0;var c,u,m,g,e=a[r][l].act+parseInt(e);if(a[r][l].max&&e<=a[r][l].max){for(y=0;y<a.length;y++)if(d&&s&&y!=r){let e=[],t=s[y].toString();t&&t.indexOf("#")?e=t.split("#"):e[0]=t;let i=[];(d=d.toString()).indexOf("#")?i=d.split("#"):i[0]=d;let n=!1;if(parseInt(e[0])===parseInt(i[0])?n=!0:e[1]&&i[1]&&(u=(c=parseInt(e[0]))+parseInt(e[1]),g=(m=parseInt(i[0]))+parseInt(i[1]),(c<=m&&m<u||c<g&&g<=u)&&(n=!0)),n)for(z=0;z<a[y].length;z++)if(a[y][z].max&&a[y][z].act>=a[y][z].max||a[y][z].act+a[r][l].act>=a[r][l].max)return!1;o=!0}}else o=!a[r][l].max;return o}function shuffle(e){let t=e.length;for(;0<t;){var i=Math.floor(Math.random()*t);t--;var n=e[t];e[t]=e[i],e[i]=n}return e}function addRadioFieldSet(n,e,a,r,l,d){var s,o=e.times;if(n)for(;n.firstChild;)n.firstChild.remove();for(s in o){var c=o[s].name,u=o[s].interval,m=o[s].time,g=o[s].objects,v=o[s].begin,b=o[s].description,p=0,f=document.getElementById("c4g_reservation_object_"+a),_="",y=1,h=0;if(f)for(i=0;i<f.options.length;i++){var A=f.options[i],I=A.getAttribute("min")?parseInt(A.getAttribute("min")):1;(-1==I||I<y)&&(y=I);A=A.getAttribute("max")?parseInt(A.getAttribute("max")):0;(-1==A||h<A)&&(h=A)}let e=[],t="";if(!r||-1==r||y<=r&&(!h||r<=h)){var g=shuffle(g),E=!0;for(j=0;j<g.length;j++){var N=g[j];-1!=parseInt(N.id)&&(p=N.percent,N.priority&&1==N.priority?e.splice(0,0,N.id):e.push(N.id),E=!1)}_=E}else _=!0;for(j=0;j<e.length;j++)0==j?t+=e[j]:t=t+"-"+e[j];var B=document.createElement("div");B.className="c4g__form-check";var k=document.createElement("input");k.type="radio",k.className="c4g__form-check-input c4g__btn-check",d?(k.setAttribute("name","_c4g_beginTime_"+a+"-33"+d),k.id="beginTime_"+a+"-33"+d+"-"+m+"#"+u,k.setAttribute("onclick","document.getElementById('c4g_beginTime_"+a+"-33"+d+"').value=this.value;")):(k.setAttribute("name","_c4g_beginTime_"+a),k.id="beginTime_"+a+"-"+m+"#"+u,k.setAttribute("onchange","setObjectId(this,"+a+","+l+");"),k.setAttribute("onclick","document.getElementById('c4g_beginTime_"+a+"').value=this.value;")),k.setAttribute("data-object",t),k.setAttribute("value",m+"#"+u),k.setAttribute("data-stamp",v),k.setAttribute("data-desc",b),k.style="display: block;",_&&(k.setAttribute("disabled",_),k.setAttribute("hidden",_)),0<p&&(k.className=k.className+" radio_object_hurry_up"),B.appendChild(k);_=document.createElement("label");_.className="c4g__form-check-label c4g__btn c4g__btn-radio",_.innerText=c,_.htmlFor=k.id,B.appendChild(_),n.appendChild(B),n.parentNode.parentNode.getElementsByClassName("c4g__form-description")[0].innerText=b}}function setTimeset(e,c,u,m){var t=-1,g=-1,n=document.querySelectorAll(".c4g__form-date-container .c4g_beginDate_"+c);if(n)for(k=0;k<n.length;k++){var a=n[k];a&&a.removeAttribute("data-org")}var r=document.getElementById("c4g_reservation_object_"+c);if(m)for(r.setAttribute("value",m),i=0;i<r.options.length;i++){let e=r.options[i];e.value==r.value?e.setAttribute("selected","true"):e.removeAttribute("selected")}else r&&(r.value=-1,eventFire(r,"change"));var l=document.getElementById("c4g_duration_"+c);l&&l.style&&"none"!==l.display&&(t=l.value);var v,l=document.getElementById("c4g_desiredCapacity_"+c);l&&l.style&&"none"!==l.display&&(g=l.value),(e=e&&e.indexOf("/")?(e=e.replace("/","~")).replace("/","~"):e)&&c&&(t=t||-1,g=g||-1,v=!(document.getElementsByClassName("c4g__spinner-wrapper")[0].style.display="flex"),fetch("/reservation-api/currentTimeset/"+e+"/"+c+"/"+t+"/"+g+"/"+m).then(e=>e.json()).then(e=>{var t=c;m&&(t+="-33"+m),addRadioFieldSet(document.querySelector(".radio-group-beginTime_"+t),e,c,g,u,m);var i=document.getElementById("c4g_reservation_object_"+c),n=e.captions;document.getElementById("c4g_reservation_id").value&&document.getElementById("c4g_reservation_id").value==e.reservationId||(document.getElementById("c4g_reservation_id").value=e.reservationId),document.getElementsByClassName("reservation-id")[0].style.display="block";document.getElementsByClassName("reservation_time_button_"+t);if(n&&n[m]){var a=document.getElementById("c4g_reservation_object_"+c);if(a&&a.length)for(z=0;z<a.options.length;z++)if(a.options[z].value==m){a.options[z].innerHtml=n[m];break}}if(handleBrickConditions(),-1!=c){var r=document.querySelectorAll(".radio-group-beginTime_"+t+' input[type = "hidden"]'),l=!1;if(r)for(z=0;z<r.length;z++)if("none"!=r[z].style.display){l=r[z].value;break}var d=document.querySelectorAll(".radio-group-beginTime_"+t+' input[type = "radio"]'),s=[];if(d&&d.length)for(z=0;z<d.length;z++){var o=d[z];!o||o.getAttribute("disabled")||o.getAttribute("hidden")||(l&&o.value===l?v=o:o.value&&s.push(o))}if(!v&&s&&1<=s.length)for(z=0;z<s.length;z++){v=s[z];break}if(!m&&i&&(setObjectId(0,c,u),i.value=-1,eventFire(i,"change"),i.disabled=!0),m)!v||v.disabled||v.classList.contains("radio_object_disabled")||v.click();else if(!v||v.disabled||v.classList.contains("radio_object_disabled")){for(z=0;z<s.length;z++)s[z].removeAttribute("checked");i&&(i.value=-1,eventFire(i,"change"),i.disabled=!0)}else v.setAttribute("checked","checked"),document.getElementById("c4g_beginTime_"+c).value=v.value,setObjectId(v,c,u)}}).finally(function(){document.getElementsByClassName("c4g__spinner-wrapper")[0].style.display="none"}))}function checkEventFields(){var e=document.getElementById("c4g_reservation_type"),t=e?e.value:-1,n=document.querySelectorAll("#c4g_reservation_object_event_"+t)[0],e=document.getElementsByClassName("eventdata");if(e&&(e.hidden=!0),n&&"hidden"!=n){for(i=0;i<n.length;i++)if(n[i].value){var a,r,l,d=-1;if(n[i].value&&(d=t.toString()+"-22"+n[i].value.toString(),(a=document.querySelectorAll(".eventdata_"+d))&&(a.visibility="hidden",a.hidden=!0)),r=document.getElementsByClassName("begindate-event"))for(j=0;j<r.length;j++)-1!=d&&r[j].querySelectorAll(".c4g__form-date-container")[j].childNodes[j].classList.contains("c4g_beginDateEvent_"+d)?(r[j].visible=!0,r[j].childNodes[j].getElementsByTagName("label").visible=!0,r[j].childNodes[j].querySelectorAll(".c4g__form-date-container").visible=!0,r[j].childNodes[j].getElementsByTagName("input").visible=!0):(r[j].hidden=!0,r[j].getElementsByTagName("label").hidden=!0,r[j].childNodes[j].querySelectorAll(".c4g__form-date-container").hidden=!0,r[j].childNodes[j].getElementsByTagName("input").hidden=!0);if(l=document.getElementsByClassName("reservation_time_event_button"))for(j=0;j<l.length;j++)-1!=d&&l[j].classList.contains("reservation_time_event_button_"+d)?(l[j].visible=!0,l[j].childNodes[j].getElementsByTagName("label").visible=!0,l[j].parentNode.visible=!0,l[j].parentNode.parentNode.visible=!0,l[j].parentNode.parentNode.parentNode.visible=!0):(l[j].hidden=!0,l[j].childNodes[j].getElementsByTagName("label").hidden=!0,l[j].parentNode.hidden=!0,l[j].parentNode.parentNode.hidden=!0,l[j].parentNode.parentNode.parentNode.hidden=!0)}}else{if((r=document.getElementsByClassName("begindate-event"))&&Array.isArray(r))for(i=0;i<r.length;i++)r[i].hidden=!0;if((l=document.getElementsByClassName("reservation_time_event_button"))&&Array.isArray(l))for(i=0;i<l.length;i++)l[i].hidden=!0}}